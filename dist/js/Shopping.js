require(["config"],function(){require(["jquery","header","footer","template","cookie"],function(r,e,t,n){new Promise(function(t,o){r("header").load("/html/component/header.html",function(){t(),e.cookie()}),r("footer").load("/html/component/footer.html",function(){t()})}).then(function(){function t(){this.products=null,this.load(),this.addListener()}t.prototype={constructor:t,load:function(){r.cookie.json=!0;var t=this.products=r.cookie("Shopping")||[],o=n("cart-body-template",{products:t});r(".cart-table tbody").html(o)},addListener:function(){r(".cart-table tbody").on("click",".del",r.proxy(this.delHandler,this)),r(".cart-table tbody").on("click",".decrement,.increment",r.proxy(this.decIncHandler,this)),r(".cart-table tbody").on("blur",".amount",r.proxy(this.inputHandler,this))},delHandler:function(t){var o=t.target,e=r(o).parents("tr"),n=e.find(".id").text();this.products=this.products.filter(function(t){return!(t.id==n)}),r.cookie("Shopping",this.products,{expires:10,path:"/"}),e.remove()},decIncHandler:function(t){var o=t.target,e=r(o).parents("tr"),n=e.find(".id").text(),i=this.products.filter(function(t){return t.id==n})[0];if(r(o).is(".decrement")){if(i.amount<=1)return;i.amount--}else i.amount++;r.cookie("Shopping",this.products,{expires:10,path:"/"}),e.find(".amount").val(i.amount),e.find(".sub").text(i.amount*i.promotionPrice)}},new t})})});