require(["config"],function(){require(["jquery","header","footer","template","cookie"],function(a,e,t,c){new Promise(function(t,o){a("header").load("/html/component/header.html",function(){e.cookie(),t()}),a("footer").load("/html/component/footer.html",function(){t()})}).then(function(){e.nav()}).then(function(){a(function(){a("#detail").on("mouseenter","img.smallImage",function(){var t=a(this).attr("src");a("img.bigImg").attr("src",t)})}),a("img.bigImg").load(function(){a("img.smallImage").each(function(){var t=a(this).attr("bigImgURL");img=new Image,img.src=t,img.onload=function(){a("div.imgload").append(a(img))}})})}).then(function(){a(function(){a("#detail").on("keyup",".productNumberSetting",function(){var t=a(".productNumberSetting").val();t=parseInt(t),isNaN(t)&&(t=1),t<=0&&(t=1),98<t&&(t=98),a(".productNumberSetting").val(t)}),a("#detail").on("click",".increaseNumber",function(){var t=a(".productNumberSetting").val();98<++t&&(t=98),a(".productNumberSetting").val(t)}),a("#detail").on("click",".decreaseNumber",function(){var t=a(".productNumberSetting").val();--t<=0&&(t=1),a(".productNumberSetting").val(t)})})}).then(function(){var t=location.search.slice(1).split("="),o={};o[t[0]]=t[1],a.ajax({url:"http://localhost/project/projectserver/api/detail.php",data:o,method:"POST",dataType:"json",success:function(t){if(1===t.code){var o=c("detail-template",{product:t.product});a("#detail").html(o);var e=t.product.id,n=t.product.bigImg,i=t.product.productTitle,r=t.product.promotionPrice;a("#detail").on("click",".addCartLink",function(){a(".addCartButton").html("已加入购物车"),a(".addCartButton").attr("disabled","disabled"),a(".addCartButton").css("background-color","lightgray"),a(".addCartButton").css("border-color","lightgray"),a(".addCartButton").css("color","black"),a(".check").click(function(){var t=a("#acount").html();t=parseInt(t),++t,a("#acount").html(t)});var o={id:e,bigImg:n,productTitle:i,promotionPrice:r,amount:1};a.cookie.json=!0;var t=a.cookie("Shopping")||[];t.some(function(t){return t.id==o.id&&(t.amount++,!0)})||t.push(o),a.cookie("Shopping",t,{expires:10,path:"/"})})}}})})})});